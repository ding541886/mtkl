# 蒙特卡洛住宅自动化生成及优化系统

基于蒙特卡洛算法的智能化住宅平面图生成和优化系统，提供自动布局生成、多维度评估、实时可视化和多格式导出功能。

## 功能特性

### 🏠 自动化布局生成
- 基于蒙特卡洛算法的智能房间布局生成
- 支持多种房间类型和自定义配置
- 矩形分割算法确保高效空间利用

### 📊 多维度评估系统
- **空间效率**：房间利用率、布局紧凑度评估
- **采光效果**：窗户配置、自然光线分布评估
- **通风效果**：空气流通、对流通风评估
- **动线效率**：房间连接性、交通路径评估
- **舒适度**：噪音隔离、隐私保护、社交空间评估

### 🎨 实时可视化
- 2D平面图实时渲染
- 交互式缩放和平移
- 房间高亮和信息显示
- 评估结果可视化

### 💾 多格式导出
- **PNG**：高质量图像导出
- **SVG**：矢量图形导出
- **DXF**：CAD格式导出（需安装ezdxf）
- **PDF**：文档格式导出（需安装reportlab）
- **JSON**：结构化数据导出

### ⚙️ 参数化配置
- 灵活的房间配置选项
- 算法参数自定义
- 评估权重调整
- 预设方案管理

## 安装说明

### 环境要求
- Python 3.9 或更高版本
- 操作系统：Windows、macOS、Linux

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd residence-automation-optimizer
```

2. **创建虚拟环境**
```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
# 或
venv\Scripts\activate     # Windows
```

3. **安装依赖**
```bash
pip install -r requirements.txt
```

4. **可选依赖安装**
```bash
# DXF导出支持
pip install ezdxf

# PDF导出支持
pip install reportlab

# 完整功能安装
pip install -r requirements.txt
pip install ezdxf reportlab
```

## 使用方法

### 启动应用
```bash
python main_application.py
```

### 基本使用流程

1. **配置参数**
   - 点击"参数配置"按钮
   - 设置房间数量、尺寸等基础参数
   - 调整算法和评估权重
   - 选择预设方案或自定义配置

2. **开始生成**
   - 点击"开始生成"按钮
   - 系统自动进行布局生成和优化
   - 实时显示优化进度

3. **查看结果**
   - 在结果窗口查看优化后的平面图
   - 查看详细的评估报告
   - 使用交互功能缩放和查看细节

4. **导出结果**
   - 选择需要的导出格式
   - 设置导出参数和质量
   - 保存到指定位置

### 快速开始

系统提供三种预设方案：

- **小户型公寓**：适用于30-60平方米的小户型
- **标准住宅**：适用于80-120平方米的标准户型
- **大户型**：适用于150平方米以上的大户型

选择相应的快速开始按钮，系统将使用优化的参数配置直接开始生成。

## 项目结构

```
residence-automation-optimizer/
├── main_application.py          # 主应用程序入口
├── core_data_structures.py      # 核心数据结构定义
├── monte_carlo_engine.py        # 蒙特卡洛算法引擎
├── evaluation_system.py         # 多维度评估系统
├── visualization_engine.py      # 可视化渲染引擎
├── config_interface.py          # 参数配置界面
├── export_system.py             # 结果导出系统
├── requirements.txt             # 项目依赖
├── README.md                   # 项目说明
└── examples/                   # 示例文件（可选）
```

## 技术架构

### 核心算法
- **蒙特卡洛优化**：基于随机采样的布局优化
- **遗传算法**：种群进化优化策略
- **模拟退火**：避免局部最优的优化技术

### 评估体系
- **多目标优化**：平衡多个评估维度
- **权重配置**：用户自定义评估权重
- **归一化处理**：统一不同指标的评分标准

### 可视化技术
- **Matplotlib**：2D图形渲染
- **Tkinter**：GUI框架
- **交互式操作**：实时用户交互

## 性能优化

### 并行处理
- 支持多线程并行优化
- 可配置线程数量
- 自动负载均衡

### 内存管理
- 智能缓存机制
- 及时释放资源
- 优化数据结构

### 算法优化
- 早停策略
- 收敛检测
- 参数自适应调整

## 扩展开发

### 添加新的评估维度
1. 在`evaluation_system.py`中创建新的评估器类
2. 继承`BaseEvaluator`基类
3. 实现`evaluate`方法
4. 在`MultiDimensionalEvaluator`中注册

### 添加新的导出格式
1. 在`export_system.py`中创建新的导出器类
2. 继承`BaseExporter`基类
3. 实现`export`方法
4. 在`ExportManager`中注册

### 自定义算法
1. 在`monte_carlo_engine.py`中扩展现有算法
2. 或创建新的优化器类
3. 实现相应的优化接口

## 常见问题

### Q: 导出DXF/PDF时出错？
A: 请确保已安装相应的依赖库：`pip install ezdxf reportlab`

### Q: 优化速度较慢？
A: 可以在配置中启用并行计算，或调整算法参数减少迭代次数

### Q: 生成的布局不合理？
A: 尝试调整房间参数配置、增加迭代次数，或修改评估权重

### Q: 如何保存自定义配置？
A: 在参数配置界面使用"保存预设"功能

## 更新日志

### v1.0.0 (2024-12-05)
- 初始版本发布
- 实现核心蒙特卡洛算法
- 完整的可视化和导出功能
- 多维度评估系统
- 图形化用户界面

## 技术支持

如有问题或建议，请通过以下方式联系：

- 📧 邮箱：support@example.com
- 🐛 问题反馈：GitHub Issues
- 📖 文档：项目Wiki

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 贡献指南

欢迎贡献代码！请遵循以下步骤：

1. Fork 项目
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

请确保代码符合项目规范，并添加适当的测试。